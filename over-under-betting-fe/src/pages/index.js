import Head from 'next/head'
import Image from 'next/image'
import React, {useState} from "react"
import { Inter } from 'next/font/google'

import PriceChart from '@/components/PriceChart'
import ConnectWalletButton from '@/components/ConnectWalletButton'
import BettingEvent from '@/components/BettingEvent'

import { get_all_hourly_price_data } from '../utils/api_calls/over_under_api_calls'

const inter = Inter({ subsets: ['latin'] })


const Home = ({server_data}) => {
  const btc_data = server_data['btc'];
  const eth_data = server_data['eth'];

  return (
    <>
      <Head>
        <title>Over-Under-Betting</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className="home-container">
        <div className="navbar">
          <div className="home-logo">LOGO</div>
          <div className="nav-link">BROWSE MARKETS</div>
          <div className="nav-link">DOCS</div>
          <div className="nav-link">ADDITIONAL INFO</div>
          <div className="connect-wallet-btn">
              <ConnectWalletButton />
          </div>
        </div>
        <div className="markets-text">MARKETS</div>
        <div className="markets-group">
          <div className="market-graph">
            <PriceChart data={btc_data} assetSymbol={"BTC"} />
          </div>
          <div className="market-graph-1">
            <PriceChart data={eth_data} assetSymbol={"ETH"}/>
          </div>

        </div>
        <div className="events-text">EVENTS</div>
        <div className="events-group">
          <div className="event-card">
            <BettingEvent />
          </div>
          <div className="event-card-1">
            <BettingEvent />
          </div>
        </div>
        <div className="social-navbar"></div>
      </div>
    </>
  )
}

// For now just get data for charts
export const getServerSideProps = async () => {
  const price_data = await get_all_hourly_price_data(24);
  console.log("server_side: " + price_data)
  const server_data = {
    btc: price_data.btc,
    eth: price_data.eth,
  }

  return {
    props: {server_data}
  };
};

export default Home;
